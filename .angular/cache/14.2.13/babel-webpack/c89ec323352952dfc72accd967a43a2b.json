{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"../../services/artist.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nfunction ArtistListComponent_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.goAddArtist());\n    });\n    i0.ɵɵtext(1, \"Add artist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistListComponent_div_6_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n\n  if (rf & 2) {\n    const artist_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r5.url + \"/artist/image/\" + artist_r4.image, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ArtistListComponent_div_6_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r6.url + \"/artist/image/IXc8_IwnlB4XBS7ASs1pX8bS.jpg\", i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ArtistListComponent_div_6_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_div_6_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const artist_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.seeArtist(artist_r4._id));\n    });\n    i0.ɵɵtext(1, \"See artist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistListComponent_div_6_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_div_6_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const artist_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.goEditArtist(artist_r4._id, artist_r4.name));\n    });\n    i0.ɵɵtext(1, \"Edit artist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistListComponent_div_6_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_div_6_button_10_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const artist_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.deleteArtist(artist_r4._id));\n    });\n    i0.ɵɵtext(1, \"Delete artist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistListComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, ArtistListComponent_div_6_img_1_Template, 1, 1, \"img\", 7);\n    i0.ɵɵtemplate(2, ArtistListComponent_div_6_img_2_Template, 1, 1, \"img\", 7);\n    i0.ɵɵelementStart(3, \"div\", 8)(4, \"h4\", 9);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 10);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, ArtistListComponent_div_6_button_8_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(9, ArtistListComponent_div_6_button_9_Template, 2, 0, \"button\", 12);\n    i0.ɵɵtemplate(10, ArtistListComponent_div_6_button_10_Template, 2, 0, \"button\", 13);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const artist_r4 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", artist_r4.image !== \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", artist_r4.image === \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(artist_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artist_r4.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.identity);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.identity && ctx_r1.identity.role === \"ROLE_ADMIN\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.identity && ctx_r1.identity.role === \"ROLE_ADMIN\");\n  }\n}\n\nexport let ArtistListComponent = /*#__PURE__*/(() => {\n  class ArtistListComponent {\n    constructor(userSvc, artistSvc, router, route) {\n      this.userSvc = userSvc;\n      this.artistSvc = artistSvc;\n      this.router = router;\n      this.route = route;\n      this.title = 'Artist List';\n      this.url = environment.apiUrl;\n      this.block = false;\n    }\n\n    ngOnInit() {\n      this.identity = this.userSvc.getIdentity();\n      this.token = this.userSvc.getToken();\n      this.actualPage = this.route.snapshot.params['page'];\n      this.getArtistList();\n    }\n\n    changePage(direction) {\n      if (direction === 'next') {\n        this.actualPage++;\n      } else if (direction === 'prev' && this.actualPage > 1) {\n        this.actualPage--;\n      }\n\n      if (this.artistList.length < 4) {\n        this.block = true;\n      } else {\n        this.block = false;\n      }\n\n      this.router.navigate([`list/${this.actualPage}`]);\n      this.getArtistList();\n    }\n\n    goAddArtist() {\n      this.router.navigate(['add-artist']);\n    }\n\n    goEditArtist(id) {\n      this.router.navigate(['edit-artist/' + id]);\n    }\n\n    seeArtist(id) {\n      this.router.navigate(['see-artist/' + id, this.actualPage]);\n    }\n\n    deleteArtist(id, name) {\n      Swal.fire({\n        title: 'Are you sure?',\n        text: 'You are going to delete artist with id: ' + name,\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.artistSvc.deleteArtist(this.token, id).subscribe({\n            next: () => {\n              this.getArtistList();\n            },\n            error: err => {\n              console.log(err);\n              Swal.fire({\n                icon: 'error',\n                title: 'Ooops...',\n                text: 'Something went wrong'\n              });\n            }\n          });\n        }\n      });\n    }\n\n    getArtistList() {\n      this.artistSvc.getArtists(this.token, this.actualPage).subscribe({\n        next: value => {\n          this.artistList = value.artists;\n\n          if (this.artistList.length < 4) {\n            this.block = true;\n          } else {\n            this.block = false;\n          }\n        },\n        error: err => {\n          console.log(err);\n        }\n      });\n    }\n\n  }\n\n  ArtistListComponent.ɵfac = function ArtistListComponent_Factory(t) {\n    return new (t || ArtistListComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ArtistService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n\n  ArtistListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArtistListComponent,\n    selectors: [[\"app-artist-list\"]],\n    decls: 7,\n    vars: 3,\n    consts: [[1, \"container\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-3\"], [\"id\", \"addArtist\", \"class\", \"btn btn-success\", 3, \"click\", 4, \"ngIf\"], [1, \"row\"], [\"class\", \"card mb-3 col-md-4\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"addArtist\", 1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"card\", \"mb-3\", \"col-md-4\"], [\"class\", \"card-img-top\", \"alt\", \"Card image cap\", 3, \"src\", 4, \"ngIf\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [\"class\", \"btn btn-secondary\", \"style\", \"margin-right: 0.3em;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-warning\", \"style\", \"margin-right: 0.3em;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-danger\", 3, \"click\", 4, \"ngIf\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 3, \"src\"], [1, \"btn\", \"btn-secondary\", 2, \"margin-right\", \"0.3em\", 3, \"click\"], [1, \"btn\", \"btn-warning\", 2, \"margin-right\", \"0.3em\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n    template: function ArtistListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1);\n        i0.ɵɵtemplate(4, ArtistListComponent_button_4_Template, 2, 0, \"button\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 3);\n        i0.ɵɵtemplate(6, ArtistListComponent_div_6_Template, 11, 7, \"div\", 4);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.identity && ctx.identity.role === \"ROLE_ADMIN\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.artistList);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf],\n    styles: [\"#addArtist[_ngcontent-%COMP%]{margin:.5em}p[_ngcontent-%COMP%]{font-size:large}li[_ngcontent-%COMP%]{margin:.5em}.card[_ngcontent-%COMP%]{margin:.3em}.btn-success[_ngcontent-%COMP%]{margin:.3em;font-size:large}\"]\n  });\n  return ArtistListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}