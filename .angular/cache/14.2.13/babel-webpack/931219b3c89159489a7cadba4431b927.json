{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/user.service\";\nimport * as i2 from \"../../services/artist.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nfunction ArtistListComponent_div_0_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_div_0_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.goAddArtist());\n    });\n    i0.ɵɵtext(1, \"Add artist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistListComponent_div_0_a_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 9);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_div_0_a_8_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.changePage(\"prev\"));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 10);\n    i0.ɵɵelement(2, \"path\", 11);\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ArtistListComponent_div_0_a_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 9);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_div_0_a_10_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.changePage(\"next\"));\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 12);\n    i0.ɵɵelement(2, \"path\", 13);\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ArtistListComponent_div_0_ul_11_div_1_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 24);\n  }\n\n  if (rf & 2) {\n    const artist_r12 = i0.ɵɵnextContext().$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r13.url + \"/artist/image/\" + artist_r12.image, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ArtistListComponent_div_0_ul_11_div_1_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 24);\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(4);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r14.url + \"/artist/image/IXc8_IwnlB4XBS7ASs1pX8bS.jpg\", i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ArtistListComponent_div_0_ul_11_div_1_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_div_0_ul_11_div_1_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const artist_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r19 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r19.seeArtist(artist_r12._id));\n    });\n    i0.ɵɵtext(1, \"See artist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistListComponent_div_0_ul_11_div_1_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_div_0_ul_11_div_1_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const artist_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r22.goEditArtist(artist_r12._id, artist_r12.name));\n    });\n    i0.ɵɵtext(1, \"Edit artist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistListComponent_div_0_ul_11_div_1_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function ArtistListComponent_div_0_ul_11_div_1_button_10_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const artist_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r25 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r25.deleteArtist(artist_r12._id));\n    });\n    i0.ɵɵtext(1, \"Delete artist\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ArtistListComponent_div_0_ul_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, ArtistListComponent_div_0_ul_11_div_1_img_1_Template, 1, 1, \"img\", 17);\n    i0.ɵɵtemplate(2, ArtistListComponent_div_0_ul_11_div_1_img_2_Template, 1, 1, \"img\", 17);\n    i0.ɵɵelementStart(3, \"div\", 18)(4, \"h4\", 19);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 20);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, ArtistListComponent_div_0_ul_11_div_1_button_8_Template, 2, 0, \"button\", 21);\n    i0.ɵɵtemplate(9, ArtistListComponent_div_0_ul_11_div_1_button_9_Template, 2, 0, \"button\", 22);\n    i0.ɵɵtemplate(10, ArtistListComponent_div_0_ul_11_div_1_button_10_Template, 2, 0, \"button\", 23);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const artist_r12 = ctx.$implicit;\n    const ctx_r11 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", artist_r12.image != \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", artist_r12.image == \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(artist_r12.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(artist_r12.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.identity);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.identity && ctx_r11.identity.role === \"ROLE_ADMIN\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.identity && ctx_r11.identity.role === \"ROLE_ADMIN\");\n  }\n}\n\nfunction ArtistListComponent_div_0_ul_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 14);\n    i0.ɵɵtemplate(1, ArtistListComponent_div_0_ul_11_div_1_Template, 11, 7, \"div\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.artistList);\n  }\n}\n\nfunction ArtistListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"h1\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2);\n    i0.ɵɵtemplate(4, ArtistListComponent_div_0_button_4_Template, 2, 0, \"button\", 3);\n    i0.ɵɵelementStart(5, \"div\", 4)(6, \"ul\", 5)(7, \"li\");\n    i0.ɵɵtemplate(8, ArtistListComponent_div_0_a_8_Template, 3, 0, \"a\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"li\");\n    i0.ɵɵtemplate(10, ArtistListComponent_div_0_a_10_Template, 3, 0, \"a\", 6);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(11, ArtistListComponent_div_0_ul_11_Template, 2, 1, \"ul\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.identity && ctx_r0.identity.role === \"ROLE_ADMIN\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.actualPage > 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.block != true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.artistList);\n  }\n}\n\nexport let ArtistListComponent = /*#__PURE__*/(() => {\n  class ArtistListComponent {\n    constructor(userSvc, artistSvc, router, route) {\n      this.userSvc = userSvc;\n      this.artistSvc = artistSvc;\n      this.router = router;\n      this.route = route;\n      this.title = 'Artist List';\n      this.url = environment.apiUrl;\n      this.block = false;\n    }\n\n    ngOnInit() {\n      this.identity = this.userSvc.getIdentity();\n      this.token = this.userSvc.getToken();\n      this.actualPage = this.route.snapshot.params['page'];\n      this.getArtistList();\n    }\n\n    changePage(direction) {\n      if (direction === 'next') {\n        this.actualPage++;\n      } else if (direction === 'prev' && this.actualPage > 1) {\n        this.actualPage--;\n      }\n\n      if (this.artistList.length < 4) {\n        this.block = true;\n      } else {\n        this.block = false;\n      }\n\n      this.router.navigate([`list/${this.actualPage}`]);\n      this.getArtistList();\n    }\n\n    goAddArtist() {\n      this.router.navigate(['add-artist']);\n    }\n\n    goEditArtist(id) {\n      this.router.navigate(['edit-artist/' + id]);\n    }\n\n    seeArtist(id) {\n      this.router.navigate(['see-artist/' + id, this.actualPage]);\n    }\n\n    deleteArtist(id, name) {\n      Swal.fire({\n        title: 'Are you sure?',\n        text: 'You are going to delete artist with id: ' + name,\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.artistSvc.deleteArtist(this.token, id).subscribe({\n            next: () => {\n              this.getArtistList();\n            },\n            error: err => {\n              console.log(err);\n              Swal.fire({\n                icon: 'error',\n                title: 'Ooops...',\n                text: 'Something went wrong'\n              });\n            }\n          });\n        }\n      });\n    }\n\n    getArtistList() {\n      this.artistSvc.getArtists(this.token, this.actualPage).subscribe({\n        next: value => {\n          this.artistList = value.artists;\n\n          if (this.artistList.length < 4) {\n            this.block = true;\n          } else {\n            this.block = false;\n          }\n        },\n        error: err => {\n          console.log(err);\n        }\n      });\n    }\n\n  }\n\n  ArtistListComponent.ɵfac = function ArtistListComponent_Factory(t) {\n    return new (t || ArtistListComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ArtistService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n\n  ArtistListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArtistListComponent,\n    selectors: [[\"app-artist-list\"]],\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"container\", 4, \"ngIf\"], [1, \"container\"], [1, \"actions\"], [\"id\", \"addArtist\", \"class\", \"btn btn-success\", 3, \"click\", 4, \"ngIf\"], [\"id\", \"paginar\", 1, \"col-md-12\"], [1, \"pagination\"], [3, \"click\", 4, \"ngIf\"], [\"class\", \"d-flex flex-wrap justify-content-center\", 4, \"ngIf\"], [\"id\", \"addArtist\", 1, \"btn\", \"btn-success\", 3, \"click\"], [3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-arrow-left\"], [\"fill-rule\", \"evenodd\", \"d\", \"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"24\", \"height\", \"24\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"bi\", \"bi-arrow-right\"], [\"fill-rule\", \"evenodd\", \"d\", \"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z\"], [1, \"d-flex\", \"flex-wrap\", \"justify-content-center\"], [\"class\", \"card mb-3 col-md-8 mx-auto\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"mb-3\", \"col-md-8\", \"mx-auto\"], [\"class\", \"card-img-top\", \"alt\", \"Card image cap\", 3, \"src\", 4, \"ngIf\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [\"class\", \"btn btn-secondary\", \"style\", \"margin-right: 0.3em;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-warning\", \"style\", \"margin-right: 0.3em;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-danger\", 3, \"click\", 4, \"ngIf\"], [\"alt\", \"Card image cap\", 1, \"card-img-top\", 3, \"src\"], [1, \"btn\", \"btn-secondary\", 2, \"margin-right\", \"0.3em\", 3, \"click\"], [1, \"btn\", \"btn-warning\", 2, \"margin-right\", \"0.3em\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n    template: function ArtistListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ArtistListComponent_div_0_Template, 12, 5, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.artistList);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf],\n    styles: [\"#addArtist[_ngcontent-%COMP%]{margin:.5em}.card[_ngcontent-%COMP%]{margin:.5em .8em .5em .5em;float:left}p[_ngcontent-%COMP%]{font-size:large}li[_ngcontent-%COMP%]{margin:.5em}.btn-success[_ngcontent-%COMP%]{margin:.3em;font-size:large}\"]\n  });\n  return ArtistListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}